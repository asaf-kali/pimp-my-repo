# Project

[project]

name = "pimp-my-repo"
version = "0.2.2"
description = "âœ¨ Enhance your Python repository by adding cutting-edge development tools"
authors = [
    { name = "Asaf Kali", email = "asaf.kali@mail.huji.ac.il" },
]
requires-python = ">=3.14"
readme = "README.md"

# Dependencies

dependencies = [
    "pydantic ~= 2.12",
    "typer >= 0.12",
    "rich >= 13.0",
    "loguru >= 0.7",
    "jinja2 >= 3.1",
    "tomlkit >= 0.11",
]

[dependency-groups]
test = [
    "pytest ~= 9.0",
    "coverage[toml] >= 7.12",
]
lint = [
    "ruff >= 0.14",
    "mypy >= 1.19",
]
dev = [
    "pre-commit >= 2.17",
]
release = [
    "python-semantic-release >= 9.18.1",
    "twine >= 5.0",
]

# Extra Metadata

[project.urls]
Homepage = "https://github.com/asaf-kali/pimp-my-repo"
Repository = "https://github.com/asaf-kali/pimp-my-repo"
Issues = "https://github.com/asaf-kali/pimp-my-repo/issues"

# UV

[tool.uv]
package = true

[project.scripts]
pimp-my-repo = "pimp_my_repo.cli.main:main"

[build-system]
requires = [ "hatchling" ]
build-backend = "hatchling.build"

# Release

[tool.semantic_release]
version_toml = [ "pyproject.toml:project.version" ]
commit_parser = "emoji"
build_command = """
    uv lock --upgrade-package "$PACKAGE_NAME"
    just build
    git add uv.lock
"""
commit_author = "Semantic release <semantic-release>"
commit_message = "ğŸ¤–  Release [{version}] [skip ci]"

[tool.semantic_release.branches.main]
match = "main"
prerelease = false

[tool.semantic_release.branches.dev]
match = ".*"
prerelease = true
prerelease_token = "dev"

[tool.semantic_release.commit_parser_options]
major_tags = [
    "ğŸ’¥",
    "ğŸš€",
    "ğŸ‰",
]
minor_tags = [
    "âœ¨",
    "ğŸ”¥",
    "ğŸ²",
]
patch_tags = [
    "ğŸ“",
    "ğŸ“œ",
    "ğŸ—ï¸",
    "ğŸ› ï¸",
    "ğŸ›",
    "ğŸš‘",
    "ğŸ“Œ",
    "ğŸŒ´",
]

# Test

[tool.pytest.ini_options]
pythonpath = "app"
testpaths = ["tests"]
addopts = "-s --disable-pytest-warnings -v"
markers = [
    "slow: marks tests as slow (deselect with '-m \"not slow\"')",
]

[tool.coverage.run]
omit = [ "tests/*" ]
source = [ "." ]

# Lint

[tool.ruff]
line-length = 120

[tool.ruff.lint]
select = [ "ALL" ]
ignore = [
    "COM812", # Trailing comma conflict
    "D100",   # Missing docstring in public module
    "D101",   # Missing docstring in public class
    "D102",   # Missing docstring in public method
    "D103",   # Missing docstring in public function
    "D104",   # Missing docstring in public function
    "D107",   # Missing docstring in __init__
    "D203",   # No blank lines allowed after function docstring
    "D213",   # No blank lines allowed after class docstring
    "S101",   # Use of assertion
]
exclude = [
    "local/",
]

[tool.ruff.lint.flake8-type-checking]
runtime-evaluated-base-classes = [
  "pydantic.BaseModel",
]

[tool.mypy]
strict = true
exclude = [
    "local/",
]
